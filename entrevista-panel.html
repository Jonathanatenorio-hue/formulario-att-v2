<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entrevista Panel | AT&T - ExpertCell</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --att-blue: #00A8E1;
            --att-blue-dark: #0057B8;
            --att-blue-deeper: #003A70;
            --white: #FFFFFF;
            --gray-50: #F8FAFC;
            --gray-100: #F1F5F9;
            --gray-200: #E2E8F0;
            --gray-300: #CBD5E1;
            --gray-400: #94A3B8;
            --gray-500: #64748B;
            --gray-600: #475569;
            --gray-700: #334155;
            --gray-800: #1E293B;
            --success: #10B981;
            --success-light: #D1FAE5;
            --warning: #F59E0B;
            --warning-light: #FEF3C7;
            --danger: #EF4444;
            --danger-light: #FEE2E2;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'IBM Plex Sans', sans-serif; background: linear-gradient(135deg, var(--gray-100) 0%, var(--gray-200) 100%); min-height: 100vh; color: var(--gray-800); }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, var(--att-blue-dark) 0%, var(--att-blue-deeper) 100%); padding: 30px; border-radius: 16px; margin-bottom: 24px; box-shadow: 0 10px 40px rgba(0, 87, 184, 0.3); position: relative; overflow: hidden; }
        .header::before { content: ''; position: absolute; top: -50%; right: -20%; width: 400px; height: 400px; background: radial-gradient(circle, rgba(0, 168, 225, 0.3) 0%, transparent 70%); }
        .header-content { display: flex; align-items: center; gap: 20px; position: relative; z-index: 1; }
        .logo-container { background: var(--white); padding: 12px 20px; border-radius: 12px; }
        .logo-container img { height: 40px; display: block; }
        .header-text h1 { color: var(--white); font-size: 28px; font-weight: 700; margin-bottom: 4px; }
        .header-text p { color: rgba(255,255,255,0.8); font-size: 15px; }
        .card { background: var(--white); border-radius: 16px; padding: 28px; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.06); border: 1px solid var(--gray-200); }
        .card-title { font-size: 18px; font-weight: 600; color: var(--gray-800); margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .card-title .icon { width: 36px; height: 36px; background: linear-gradient(135deg, var(--att-blue) 0%, var(--att-blue-dark) 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: var(--white); font-size: 18px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-size: 14px; font-weight: 500; color: var(--gray-700); margin-bottom: 8px; }
        .form-group select, .form-group input, .form-group textarea { width: 100%; padding: 14px 16px; border: 2px solid var(--gray-200); border-radius: 10px; font-size: 15px; font-family: inherit; transition: all 0.2s ease; background: var(--white); }
        .form-group select:focus, .form-group input:focus, .form-group textarea:focus { outline: none; border-color: var(--att-blue); box-shadow: 0 0 0 4px rgba(0, 168, 225, 0.1); }
        .btn { padding: 14px 28px; border-radius: 10px; font-size: 15px; font-weight: 600; font-family: inherit; cursor: pointer; transition: all 0.2s ease; border: none; display: inline-flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-primary { background: linear-gradient(135deg, var(--att-blue) 0%, var(--att-blue-dark) 100%); color: var(--white); box-shadow: 0 4px 15px rgba(0, 168, 225, 0.3); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0, 168, 225, 0.4); }
        .btn-primary:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        .btn-secondary { background: var(--gray-100); color: var(--gray-700); border: 2px solid var(--gray-200); }
        .btn-danger { background: linear-gradient(135deg, var(--danger) 0%, #DC2626 100%); color: var(--white); }
        .evaluadores-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 12px; }
        .evaluador-item { display: flex; align-items: center; gap: 12px; padding: 14px 16px; background: var(--gray-50); border: 2px solid var(--gray-200); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .evaluador-item:hover { border-color: var(--att-blue); background: rgba(0, 168, 225, 0.05); }
        .evaluador-item.selected { border-color: var(--att-blue); background: rgba(0, 168, 225, 0.1); }
        .evaluador-check { width: 24px; height: 24px; border: 2px solid var(--gray-300); border-radius: 6px; display: flex; align-items: center; justify-content: center; color: transparent; }
        .evaluador-item.selected .evaluador-check { background: var(--att-blue); border-color: var(--att-blue); color: var(--white); }
        .evaluador-name { font-size: 14px; font-weight: 500; color: var(--gray-700); }
        .aspirantes-list { display: flex; flex-direction: column; gap: 12px; }
        .aspirante-card { display: flex; align-items: center; justify-content: space-between; padding: 18px 20px; background: var(--gray-50); border: 2px solid var(--gray-200); border-radius: 12px; cursor: pointer; transition: all 0.2s ease; }
        .aspirante-card:hover:not(.no-show) { border-color: var(--att-blue); background: var(--white); box-shadow: 0 4px 12px rgba(0,0,0,0.06); }
        .aspirante-card.evaluated { border-color: var(--success); background: var(--success-light); }
        .aspirante-card.no-show { border-color: var(--danger); background: var(--danger-light); opacity: 0.7; cursor: not-allowed; }
        .aspirante-info { display: flex; align-items: center; gap: 15px; }
        .aspirante-avatar { width: 48px; height: 48px; background: linear-gradient(135deg, var(--att-blue) 0%, var(--att-blue-dark) 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: var(--white); font-weight: 600; font-size: 18px; }
        .aspirante-card.no-show .aspirante-avatar { background: linear-gradient(135deg, var(--gray-400) 0%, var(--gray-500) 100%); }
        .aspirante-details h4 { font-size: 16px; font-weight: 600; color: var(--gray-800); margin-bottom: 4px; }
        .aspirante-details p { font-size: 13px; color: var(--gray-500); }
        .status-badge { padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
        .status-pending { background: var(--warning-light); color: var(--warning); }
        .status-evaluated { background: var(--success-light); color: var(--success); }
        .status-noshow { background: var(--danger-light); color: var(--danger); }
        .section { display: none; }
        .section.active { display: block; }
        .eval-section { background: var(--gray-50); border-radius: 12px; padding: 24px; margin-bottom: 20px; }
        .eval-section-title { font-size: 16px; font-weight: 600; color: var(--att-blue-dark); margin-bottom: 16px; padding-bottom: 12px; border-bottom: 2px solid var(--gray-200); }
        .eval-question { margin-bottom: 24px; }
        .eval-question:last-child { margin-bottom: 0; }
        .eval-question-text { font-size: 14px; font-weight: 500; color: var(--gray-700); margin-bottom: 8px; line-height: 1.5; }
        .eval-question-hint { font-size: 12px; color: var(--gray-500); margin-bottom: 8px; font-style: italic; }
        .eval-guide { font-size: 11px; color: var(--gray-600); margin-bottom: 12px; padding: 10px; background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%); border-radius: 8px; border-left: 3px solid var(--att-blue); }
        .eval-guide strong { color: var(--att-blue-dark); }
        .rating-scale { display: flex; gap: 8px; }
        .rating-btn { width: 48px; height: 48px; border: 2px solid var(--gray-200); border-radius: 10px; background: var(--white); font-size: 16px; font-weight: 600; color: var(--gray-500); cursor: pointer; transition: all 0.2s ease; }
        .rating-btn:hover { border-color: var(--att-blue); color: var(--att-blue); }
        .rating-btn.selected { background: linear-gradient(135deg, var(--att-blue) 0%, var(--att-blue-dark) 100%); border-color: var(--att-blue); color: var(--white); }
        .option-buttons { display: flex; gap: 10px; flex-wrap: wrap; }
        .option-btn { padding: 12px 20px; border: 2px solid var(--gray-200); border-radius: 10px; background: var(--white); font-size: 14px; font-weight: 500; color: var(--gray-600); cursor: pointer; transition: all 0.2s ease; }
        .option-btn:hover { border-color: var(--att-blue); }
        .option-btn.selected { background: linear-gradient(135deg, var(--att-blue) 0%, var(--att-blue-dark) 100%); border-color: var(--att-blue); color: var(--white); }
        .option-btn.selected-warning { background: linear-gradient(135deg, var(--warning) 0%, #D97706 100%); border-color: var(--warning); color: var(--white); }
        .option-btn.selected-danger { background: linear-gradient(135deg, var(--danger) 0%, #DC2626 100%); border-color: var(--danger); color: var(--white); }
        .eval-progress { display: flex; align-items: center; gap: 12px; margin-bottom: 24px; }
        .progress-bar { flex: 1; height: 8px; background: var(--gray-200); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--att-blue) 0%, var(--att-blue-dark) 100%); transition: width 0.3s ease; }
        .progress-text { font-size: 14px; font-weight: 600; color: var(--gray-600); min-width: 60px; text-align: right; }
        .resultado-preview { background: linear-gradient(135deg, var(--gray-800) 0%, var(--gray-700) 100%); border-radius: 12px; padding: 24px; color: var(--white); text-align: center; margin-top: 20px; }
        .resultado-preview h3 { font-size: 14px; font-weight: 500; opacity: 0.8; margin-bottom: 8px; }
        .resultado-score { font-size: 48px; font-weight: 700; margin-bottom: 8px; }
        .resultado-label { font-size: 18px; font-weight: 600; padding: 8px 20px; border-radius: 20px; display: inline-block; }
        .eval-aspirante-header { display: flex; align-items: center; justify-content: space-between; padding: 20px; background: linear-gradient(135deg, var(--att-blue) 0%, var(--att-blue-dark) 100%); border-radius: 12px; margin-bottom: 24px; color: var(--white); flex-wrap: wrap; gap: 15px; }
        .eval-aspirante-info { display: flex; align-items: center; gap: 16px; }
        .eval-aspirante-avatar { width: 56px; height: 56px; background: rgba(255,255,255,0.2); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 22px; font-weight: 700; }
        .eval-aspirante-details h3 { font-size: 20px; font-weight: 600; margin-bottom: 4px; }
        .eval-aspirante-details p { opacity: 0.8; font-size: 14px; }
        .nav-buttons { display: flex; gap: 12px; margin-top: 24px; }
        .nav-buttons .btn { flex: 1; }
        .confirmation-screen { text-align: center; padding: 60px 20px; }
        .confirmation-icon { width: 100px; height: 100px; background: linear-gradient(135deg, var(--success) 0%, #059669 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px; font-size: 48px; color: var(--white); }
        .confirmation-screen h2 { font-size: 24px; color: var(--gray-800); margin-bottom: 12px; }
        .confirmation-screen p { color: var(--gray-500); margin-bottom: 24px; }
        .no-show-container { text-align: center; padding: 40px 20px; }
        .no-show-icon { font-size: 64px; margin-bottom: 20px; }
        .no-show-container h3 { font-size: 20px; color: var(--gray-700); margin-bottom: 10px; }
        .no-show-container p { color: var(--gray-500); margin-bottom: 24px; }
        .loading { display: inline-block; width: 20px; height: 20px; border: 2px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: var(--white); animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* Gu√≠a de rangos */
        .guide-box { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 2px solid var(--warning); border-radius: 12px; padding: 16px; margin-bottom: 20px; }
        .guide-box-title { font-size: 14px; font-weight: 600; color: #92400e; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
        .guide-box-content { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .guide-item { text-align: center; padding: 10px; background: rgba(255,255,255,0.7); border-radius: 8px; }
        .guide-item-score { font-size: 18px; font-weight: 700; }
        .guide-item-label { font-size: 11px; color: var(--gray-600); }
        .guide-item.green .guide-item-score { color: var(--success); }
        .guide-item.yellow .guide-item-score { color: var(--warning); }
        .guide-item.red .guide-item-score { color: var(--danger); }
        @media (max-width: 640px) {
            .container { padding: 12px; }
            .header { padding: 20px; }
            .header-content { flex-direction: column; text-align: center; }
            .header-text h1 { font-size: 22px; }
            .card { padding: 20px; }
            .evaluadores-grid { grid-template-columns: 1fr; }
            .rating-scale { justify-content: space-between; }
            .rating-btn { width: 42px; height: 42px; font-size: 14px; }
            .option-buttons { flex-direction: column; }
            .option-btn { width: 100%; text-align: center; }
            .eval-aspirante-header { flex-direction: column; text-align: center; }
            .guide-box-content { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <div class="logo-container">
                    <img src="https://cdn.brandfetch.io/idMKNzJhCD/w/512/h/512/theme/dark/icon.png" alt="AT&T Logo">
                </div>
                <div class="header-text">
                    <h1>Entrevista Panel</h1>
                    <p>Sistema de Evaluaci√≥n | ExpertCell</p>
                </div>
            </div>
        </div>

        <!-- Secci√≥n Config -->
        <div class="section active" id="section-config">
            <div class="card fade-in">
                <div class="card-title"><span class="icon">üìç</span>Configuraci√≥n de Sesi√≥n</div>
                <div class="form-group">
                    <label>Sucursal</label>
                    <select id="select-sucursal" onchange="onSucursalChange()">
                        <option value="">Selecciona una sucursal</option>
                        <option value="Torre JV Ju√°rez">Torre JV Ju√°rez</option>
                        <option value="Edificio Inbursa Antequera">Edificio Inbursa Antequera</option>
                    </select>
                </div>
                <div class="form-group" id="grupo-container" style="display: none;">
                    <label>Grupo (Fecha de Panel)</label>
                    <select id="select-grupo" onchange="onGrupoChange()">
                        <option value="">Selecciona un grupo</option>
                    </select>
                </div>
            </div>
            <div class="card fade-in" id="evaluadores-card" style="display: none;">
                <div class="card-title"><span class="icon">üë§</span>¬øQui√©n eres?</div>
                <p style="color: var(--gray-500); font-size: 14px; margin-bottom: 16px;">Selecciona tu nombre para registrar tu evaluaci√≥n</p>
                <div class="evaluadores-grid" id="evaluadores-list"></div>
            </div>
            <div class="card fade-in" id="aspirantes-card" style="display: none;">
                <div class="card-title"><span class="icon">üìã</span>Aspirantes a Evaluar</div>
                <p style="color: var(--gray-500); font-size: 14px; margin-bottom: 16px;">Selecciona un aspirante para comenzar</p>
                <div class="aspirantes-list" id="aspirantes-list"></div>
            </div>
        </div>

        <!-- Secci√≥n Evaluaci√≥n -->
        <div class="section" id="section-evaluacion">
            <div class="card fade-in">
                <div class="eval-aspirante-header">
                    <div class="eval-aspirante-info">
                        <div class="eval-aspirante-avatar" id="eval-avatar">JD</div>
                        <div class="eval-aspirante-details">
                            <h3 id="eval-nombre">Juan D√≠az</h3>
                            <p id="eval-info">Torre JV ‚Ä¢ 10:00</p>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="marcarNoSePresento()" style="background: rgba(255,255,255,0.2); border: none; color: white;">üö´ No se present√≥</button>
                </div>

                <!-- Gu√≠a de rangos (solo para ciertos evaluadores) -->
                <div class="guide-box" id="guide-box" style="display: none;">
                    <div class="guide-box-title">üìä Gu√≠a de Rangos de Aprobaci√≥n</div>
                    <div class="guide-box-content">
                        <div class="guide-item green">
                            <div class="guide-item-score">64-80 pts</div>
                            <div class="guide-item-label">‚úÖ Aprobado (muy bien)</div>
                        </div>
                        <div class="guide-item yellow">
                            <div class="guide-item-score">48-63 pts</div>
                            <div class="guide-item-label">‚ö†Ô∏è Aprobado (regular)</div>
                        </div>
                        <div class="guide-item red">
                            <div class="guide-item-score">10-47 pts</div>
                            <div class="guide-item-label">‚ùå No aprob√≥</div>
                        </div>
                    </div>
                </div>

                <div class="eval-progress">
                    <div class="progress-bar"><div class="progress-fill" id="eval-progress-bar" style="width: 0%"></div></div>
                    <span class="progress-text" id="eval-progress-text">0/16</span>
                </div>

                <!-- Parte 1 -->
                <div class="eval-section">
                    <div class="eval-section-title">üìù Parte 1: Preguntas Iniciales</div>
                    <div class="eval-question">
                        <div class="eval-question-text">1. Presentaci√≥n cronometrada (3-5 min)</div>
                        <div class="eval-question-hint">"Pres√©ntate como si fuera tu primer d√≠a con el equipo."</div>
                        <div class="eval-guide"><strong>üìå No suma puntaje.</strong> Solo observa: presencia, seguridad y actitud inicial.</div>
                        <textarea id="q1-notas" placeholder="Notas sobre la presentaci√≥n..." style="width: 100%; padding: 12px; border: 2px solid var(--gray-200); border-radius: 10px; font-family: inherit; min-height: 80px; resize: vertical;"></textarea>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">2. Caso real de call center</div>
                        <div class="eval-question-hint">"Llevas 2 d√≠as sin vender y el supervisor te pide resultados. ¬øQu√© haces?"</div>
                        <div class="eval-guide">
                            <strong>‚ùå 1-2:</strong> Se victimiza, culpa la base, excusas.<br>
                            <strong>‚ûñ 3:</strong> Respuesta gen√©rica, sin plan concreto.<br>
                            <strong>‚úÖ 4-5:</strong> Ajusta discurso, pide coaching, se responsabiliza, tiene plan de acci√≥n.
                        </div>
                        <div class="rating-scale" data-question="q2">
                            <button class="rating-btn" onclick="setRating('q2', 1)">1</button>
                            <button class="rating-btn" onclick="setRating('q2', 2)">2</button>
                            <button class="rating-btn" onclick="setRating('q2', 3)">3</button>
                            <button class="rating-btn" onclick="setRating('q2', 4)">4</button>
                            <button class="rating-btn" onclick="setRating('q2', 5)">5</button>
                        </div>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">3. Manejo de feedback frente a varios</div>
                        <div class="eval-question-hint">"Un supervisor te dice frente al equipo que tu cierre es d√©bil. ¬øC√≥mo reaccionas?"</div>
                        <div class="eval-guide">
                            <strong>‚ùå 1-2:</strong> Se ofende, ego alto, se pone a la defensiva.<br>
                            <strong>‚ûñ 3:</strong> Acepta pero sin acci√≥n clara.<br>
                            <strong>‚úÖ 4-5:</strong> Madurez, agradece el feedback, pregunta c√≥mo mejorar, trabajo en equipo.
                        </div>
                        <div class="rating-scale" data-question="q3">
                            <button class="rating-btn" onclick="setRating('q3', 1)">1</button>
                            <button class="rating-btn" onclick="setRating('q3', 2)">2</button>
                            <button class="rating-btn" onclick="setRating('q3', 3)">3</button>
                            <button class="rating-btn" onclick="setRating('q3', 4)">4</button>
                            <button class="rating-btn" onclick="setRating('q3', 5)">5</button>
                        </div>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">4. "¬øPor qu√© no deber√≠amos contratarte?"</div>
                        <div class="eval-question-hint">Pregunta inc√≥moda pero poderosa.</div>
                        <div class="eval-guide">
                            <strong>‚ùå 1-2:</strong> Se victimiza, no sabe qu√© decir, respuesta vac√≠a.<br>
                            <strong>‚ûñ 3:</strong> Respuesta gen√©rica tipo "soy perfeccionista".<br>
                            <strong>‚úÖ 4-5:</strong> Reconoce √°reas de mejora reales, usa debilidades como objetivos de crecimiento.
                        </div>
                        <div class="rating-scale" data-question="q4">
                            <button class="rating-btn" onclick="setRating('q4', 1)">1</button>
                            <button class="rating-btn" onclick="setRating('q4', 2)">2</button>
                            <button class="rating-btn" onclick="setRating('q4', 3)">3</button>
                            <button class="rating-btn" onclick="setRating('q4', 4)">4</button>
                            <button class="rating-btn" onclick="setRating('q4', 5)">5</button>
                        </div>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">5. Cultura y equipo</div>
                        <div class="eval-question-hint">"¬øQu√© actitud tuya suma a un equipo y cu√°l podr√≠a restar?"</div>
                        <div class="eval-guide">
                            <strong>‚ùå 1-2:</strong> Respuestas de manual, no conoce sus defectos.<br>
                            <strong>‚ûñ 3:</strong> Respuesta honesta pero superficial.<br>
                            <strong>‚úÖ 4-5:</strong> Autoconocimiento real, respuestas genuinas, no las t√≠picas de entrevista.
                        </div>
                        <div class="rating-scale" data-question="q5">
                            <button class="rating-btn" onclick="setRating('q5', 1)">1</button>
                            <button class="rating-btn" onclick="setRating('q5', 2)">2</button>
                            <button class="rating-btn" onclick="setRating('q5', 3)">3</button>
                            <button class="rating-btn" onclick="setRating('q5', 4)">4</button>
                            <button class="rating-btn" onclick="setRating('q5', 5)">5</button>
                        </div>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">6. Responsabilidad vs Victimismo</div>
                        <div class="eval-question-hint">"Si despu√©s de un mes no vendes lo esperado, ¬øqu√© har√≠as antes de renunciar?"</div>
                        <div class="eval-guide">
                            <strong>‚ùå 1-2:</strong> Renunciar√≠a, culpar√≠a al proceso, sin resiliencia.<br>
                            <strong>‚ûñ 3:</strong> Pedir√≠a ayuda pero sin plan propio.<br>
                            <strong>‚úÖ 4-5:</strong> Car√°cter, resiliencia, busca soluciones, se queda a luchar.
                        </div>
                        <div class="rating-scale" data-question="q6">
                            <button class="rating-btn" onclick="setRating('q6', 1)">1</button>
                            <button class="rating-btn" onclick="setRating('q6', 2)">2</button>
                            <button class="rating-btn" onclick="setRating('q6', 3)">3</button>
                            <button class="rating-btn" onclick="setRating('q6', 4)">4</button>
                            <button class="rating-btn" onclick="setRating('q6', 5)">5</button>
                        </div>
                    </div>
                </div>

                <!-- Parte 2 -->
                <div class="eval-section">
                    <div class="eval-section-title">üé≠ Parte 2: Roleplay (5 min)</div>
                    <p style="color: var(--gray-500); font-size: 13px; margin-bottom: 20px; padding: 12px; background: var(--gray-100); border-radius: 8px;">
                        üìã <strong>Escenario:</strong> "Llamas a un cliente con plan activo elegible para renovaci√≥n."<br>
                        ‚è±Ô∏è <strong>Preparaci√≥n:</strong> 30 seg | <strong>Ejecuci√≥n:</strong> 3 min<br>
                        üéØ <strong>Objetivo:</strong> No buscamos t√©cnica perfecta, sino ver c√≥mo piensa y reacciona bajo presi√≥n.
                    </p>
                    <div class="eval-question">
                        <div class="eval-question-text">7. Apertura (¬ørompe el hielo?)</div>
                        <div class="eval-guide">
                            <strong>‚ùå 1-2:</strong> Inseguro, titubea, no sabe c√≥mo empezar.<br>
                            <strong>‚ûñ 3:</strong> Se presenta pero sin enganche.<br>
                            <strong>‚úÖ 4-5:</strong> Seguro, claro, buen tono, va al punto r√°pido.
                        </div>
                        <div class="rating-scale" data-question="r1">
                            <button class="rating-btn" onclick="setRating('r1', 1)">1</button>
                            <button class="rating-btn" onclick="setRating('r1', 2)">2</button>
                            <button class="rating-btn" onclick="setRating('r1', 3)">3</button>
                            <button class="rating-btn" onclick="setRating('r1', 4)">4</button>
                            <button class="rating-btn" onclick="setRating('r1', 5)">5</button>
                        </div>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">8. Estructura (¬øhay orden?)</div>
                        <div class="eval-guide">
                            <strong>‚ùå 1-2:</strong> Habla sin rumbo, no hay secuencia l√≥gica.<br>
                            <strong>‚ûñ 3:</strong> Algo de orden pero se pierde.<br>
                            <strong>‚úÖ 4-5:</strong> Secuencia clara: Inicio ‚Üí Beneficio ‚Üí Intento de cierre.
                        </div>
                        <div class="rating-scale" data-question="r2">
                            <button class="rating-btn" onclick="setRating('r2', 1)">1</button>
                            <button class="rating-btn" onclick="setRating('r2', 2)">2</button>
                            <button class="rating-btn" onclick="setRating('r2', 3)">3</button>
                            <button class="rating-btn" onclick="setRating('r2', 4)">4</button>
                            <button class="rating-btn" onclick="setRating('r2', 5)">5</button>
                        </div>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">9. Comunicaci√≥n</div>
                        <div class="eval-guide">
                            <strong>‚ùå 1-2:</strong> Se traba, habla muy bajo, no se entiende.<br>
                            <strong>‚ûñ 3:</strong> Se entiende pero sin firmeza.<br>
                            <strong>‚úÖ 4-5:</strong> Fluido, palabras simples, buen ritmo, se escucha firme.
                        </div>
                        <div class="rating-scale" data-question="r3">
                            <button class="rating-btn" onclick="setRating('r3', 1)">1</button>
                            <button class="rating-btn" onclick="setRating('r3', 2)">2</button>
                            <button class="rating-btn" onclick="setRating('r3', 3)">3</button>
                            <button class="rating-btn" onclick="setRating('r3', 4)">4</button>
                            <button class="rating-btn" onclick="setRating('r3', 5)">5</button>
                        </div>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">10. Intento de cierre (FUNDAMENTAL)</div>
                        <div class="eval-guide">
                            <strong>‚ùå 1-2:</strong> Nunca intenta cerrar, solo informa.<br>
                            <strong>‚ûñ 3:</strong> Intento d√©bil o indirecto.<br>
                            <strong>‚úÖ 4-5:</strong> Lanza un cierre claro, aunque sea b√°sico. Pide la venta.
                        </div>
                        <div class="rating-scale" data-question="r4">
                            <button class="rating-btn" onclick="setRating('r4', 1)">1</button>
                            <button class="rating-btn" onclick="setRating('r4', 2)">2</button>
                            <button class="rating-btn" onclick="setRating('r4', 3)">3</button>
                            <button class="rating-btn" onclick="setRating('r4', 4)">4</button>
                            <button class="rating-btn" onclick="setRating('r4', 5)">5</button>
                        </div>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">11. Actitud bajo presi√≥n</div>
                        <div class="eval-guide">
                            <strong>‚ùå 1-2:</strong> Se bloquea, r√≠e nervioso, se rinde.<br>
                            <strong>‚ûñ 3:</strong> Se incomoda pero contin√∫a.<br>
                            <strong>‚úÖ 4-5:</strong> Mantiene compostura, maneja silencios, no se rinde.
                        </div>
                        <div class="rating-scale" data-question="r5">
                            <button class="rating-btn" onclick="setRating('r5', 1)">1</button>
                            <button class="rating-btn" onclick="setRating('r5', 2)">2</button>
                            <button class="rating-btn" onclick="setRating('r5', 3)">3</button>
                            <button class="rating-btn" onclick="setRating('r5', 4)">4</button>
                            <button class="rating-btn" onclick="setRating('r5', 5)">5</button>
                        </div>
                    </div>
                </div>

                <!-- Parte 3 -->
                <div class="eval-section">
                    <div class="eval-section-title">üéØ Parte 3: Decisi√≥n Post-Roleplay</div>
                    <div class="eval-question">
                        <div class="eval-question-text">12. ¬øIntent√≥ cerrar?</div>
                        <div class="eval-guide">üö® <strong>RED FLAG si NO:</strong> Un vendedor que no intenta cerrar no sirve para ventas.</div>
                        <div class="option-buttons" data-question="d1">
                            <button class="option-btn" onclick="setOption('d1', 'si', 5)">‚úÖ S√≠ (5 pts)</button>
                            <button class="option-btn" onclick="setOption('d1', 'no', 0)">‚ùå No (0 pts)</button>
                        </div>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">13. ¬øSe comunic√≥ con claridad?</div>
                        <div class="eval-guide">Eval√∫a si pudiste entender su mensaje sin esfuerzo.</div>
                        <div class="option-buttons" data-question="d2">
                            <button class="option-btn" onclick="setOption('d2', 'si', 5)">‚úÖ S√≠ (5 pts)</button>
                            <button class="option-btn" onclick="setOption('d2', 'no', 0)">‚ùå No (0 pts)</button>
                        </div>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">14. ¬øSu actitud suma o resta?</div>
                        <div class="eval-guide">
                            <strong>‚úÖ Suma:</strong> Se anim√≥, improvis√≥, mantuvo profesionalismo.<br>
                            <strong>‚ûñ Neutral:</strong> Ni sum√≥ ni rest√≥, pas√≥ desapercibido.<br>
                            <strong>‚ùå Resta:</strong> Se burl√≥, se quej√≥, culp√≥ al escenario.
                        </div>
                        <div class="option-buttons" data-question="d3">
                            <button class="option-btn" onclick="setOption('d3', 'suma', 5)">‚úÖ Suma (5)</button>
                            <button class="option-btn" onclick="setOption('d3', 'neutral', 3)">‚ûñ Neutral (3)</button>
                            <button class="option-btn" onclick="setOption('d3', 'resta', 0)">‚ùå Resta (0)</button>
                        </div>
                    </div>
                </div>

                <!-- Parte 4 -->
                <div class="eval-section">
                    <div class="eval-section-title">üèÜ Parte 4: Decisi√≥n del Panel</div>
                    <div class="eval-question">
                        <div class="eval-question-text">15. ¬øLo quiero en mi equipo?</div>
                        <div class="eval-guide">
                            <strong>‚ö†Ô∏è VETO:</strong> Si marcas "No", el candidato NO PASA aunque tenga buen puntaje.<br>
                            Piensa: ¬ølo pondr√≠as a trabajar contigo ma√±ana?
                        </div>
                        <div class="option-buttons" data-question="p1">
                            <button class="option-btn" onclick="setOption('p1', 'si', 5)">‚úÖ S√≠ (5)</button>
                            <button class="option-btn" onclick="setOption('p1', 'talvez', 3)">ü§î Tal vez (3)</button>
                            <button class="option-btn" onclick="setOption('p1', 'no', 0, true)">‚ùå No - VETO</button>
                        </div>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">16. ¬øTransmite responsabilidad?</div>
                        <div class="eval-guide">¬øSe har√≠a cargo de sus resultados o buscar√≠a excusas?</div>
                        <div class="option-buttons" data-question="p2">
                            <button class="option-btn" onclick="setOption('p2', 'si', 5)">‚úÖ S√≠ (5)</button>
                            <button class="option-btn" onclick="setOption('p2', 'neutral', 3)">‚ûñ Neutral (3)</button>
                            <button class="option-btn" onclick="setOption('p2', 'no', 0)">‚ùå No (0)</button>
                        </div>
                    </div>
                    <div class="eval-question">
                        <div class="eval-question-text">17. ¬øTiene energ√≠a para ventas?</div>
                        <div class="eval-guide">
                            <strong>‚ö†Ô∏è VETO:</strong> Si marcas "Baja", el candidato NO PASA.<br>
                            Ventas requiere energ√≠a constante. Sin energ√≠a, no hay ventas.
                        </div>
                        <div class="option-buttons" data-question="p3">
                            <button class="option-btn" onclick="setOption('p3', 'alta', 5)">üî• Alta (5)</button>
                            <button class="option-btn" onclick="setOption('p3', 'media', 3)">‚ûñ Media (3)</button>
                            <button class="option-btn" onclick="setOption('p3', 'baja', 0, true)">‚ùÑÔ∏è Baja - VETO</button>
                        </div>
                    </div>
                </div>

                <!-- Observaciones -->
                <div class="eval-section">
                    <div class="eval-section-title">üìù Observaciones</div>
                    <textarea id="observaciones" placeholder="Observaciones sobre el candidato..." style="width: 100%; padding: 14px; border: 2px solid var(--gray-200); border-radius: 10px; font-family: inherit; min-height: 100px; resize: vertical;"></textarea>
                </div>

                <!-- Resultado -->
                <div class="resultado-preview" id="resultado-preview">
                    <h3>PUNTAJE ACTUAL</h3>
                    <div class="resultado-score" id="resultado-score">0/80</div>
                    <div class="resultado-label" id="resultado-label" style="background: var(--gray-500);">Completa la evaluaci√≥n</div>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="volverALista()">‚Üê Volver</button>
                    <button class="btn btn-primary" id="btn-enviar" onclick="enviarEvaluacion()">Enviar Evaluaci√≥n ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Secci√≥n No Show -->
        <div class="section" id="section-noshow">
            <div class="card fade-in">
                <div class="no-show-container">
                    <div class="no-show-icon">üö´</div>
                    <h3>¬øConfirmas que no se present√≥?</h3>
                    <p id="noshow-nombre">Juan D√≠az</p>
                    <p style="font-size: 13px; color: var(--danger); margin-bottom: 20px;">‚ö†Ô∏è Esta acci√≥n bloquear√° al candidato para todos los evaluadores.</p>
                    <div style="display: flex; gap: 12px; justify-content: center;">
                        <button class="btn btn-secondary" onclick="volverAEvaluacion()">‚Üê Cancelar</button>
                        <button class="btn btn-danger" id="btn-noshow" onclick="confirmarNoShow()">Confirmar No Show</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Secci√≥n Confirmaci√≥n -->
        <div class="section" id="section-confirmacion">
            <div class="card fade-in">
                <div class="confirmation-screen">
                    <div class="confirmation-icon">‚úì</div>
                    <h2>¬°Evaluaci√≥n Enviada!</h2>
                    <p id="confirmacion-mensaje">Tu evaluaci√≥n ha sido registrada.</p>
                    <button class="btn btn-primary" onclick="evaluarOtro()">Evaluar otro aspirante ‚Üí</button>
                </div>
            </div>
        </div>
    </div>

    <script>
const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycby-HOsviZvkv83Lrsu6cFukqRK6uuft9nw438lxPv2WOX_prRx3CfosVF7-BxuwBJCQ9A/exec';

const EVALUADORES = {
    'Torre JV Ju√°rez': ['Luisa', 'Jorge', 'Fernanda', 'Karla', 'Mashiel', 'Pilar', 'Julio', 'Jonathan'],
    'Edificio Inbursa Antequera': ['Mashiel', 'Pilar', 'Julio', 'Jonathan', 'Eduardo', 'Reyna', 'Alan', 'Alfredo', 'Carlos', 'Yessica', 'Jezabel']
};

// Evaluadores que ven la gu√≠a de rangos
const EVALUADORES_CON_GUIA = ['Pilar', 'Julio', 'Mashiel', 'Eduardo', 'Luisa', 'Jonathan'];

let selectedSucursal = null;
let selectedGrupo = null;
let selectedEvaluador = null;
let selectedAspirante = null;
let aspirantesList = [];
let evaluaciones = {};
let vetos = [];

function showSection(id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    window.scrollTo(0, 0);
}

function onSucursalChange() {
    selectedSucursal = document.getElementById('select-sucursal').value;
    if (selectedSucursal) {
        document.getElementById('grupo-container').style.display = 'block';
        cargarGrupos();
        cargarEvaluadores();
    } else {
        document.getElementById('grupo-container').style.display = 'none';
        document.getElementById('evaluadores-card').style.display = 'none';
        document.getElementById('aspirantes-card').style.display = 'none';
    }
}

async function cargarGrupos() {
    const select = document.getElementById('select-grupo');
    select.innerHTML = '<option value="">Cargando...</option>';
    try {
        const r = await fetch(GOOGLE_SCRIPT_URL + '?action=getGruposPanel&sucursal=' + encodeURIComponent(selectedSucursal));
        const data = await r.json();
        select.innerHTML = '<option value="">Selecciona un grupo</option>';
        if (data.grupos && data.grupos.length > 0) {
            data.grupos.forEach(g => {
                const opt = document.createElement('option');
                opt.value = g.fecha;
                opt.textContent = g.fechaLegible;
                select.appendChild(opt);
            });
        } else {
            select.innerHTML = '<option value="">No hay grupos</option>';
        }
    } catch (e) {
        console.error(e);
        select.innerHTML = '<option value="">Error al cargar</option>';
    }
}

function cargarEvaluadores() {
    const lista = document.getElementById('evaluadores-list');
    const evs = EVALUADORES[selectedSucursal] || [];
    lista.innerHTML = '';
    evs.forEach(nombre => {
        const div = document.createElement('div');
        div.className = 'evaluador-item';
        div.innerHTML = '<span class="evaluador-check">‚úì</span><span class="evaluador-name">' + nombre + '</span>';
        div.onclick = () => {
            document.querySelectorAll('.evaluador-item').forEach(e => e.classList.remove('selected'));
            div.classList.add('selected');
            selectedEvaluador = nombre;
            if (selectedGrupo) cargarAspirantes();
        };
        lista.appendChild(div);
    });
    document.getElementById('evaluadores-card').style.display = 'block';
}

function onGrupoChange() {
    selectedGrupo = document.getElementById('select-grupo').value;
    if (selectedGrupo && selectedEvaluador) cargarAspirantes();
}

async function cargarAspirantes() {
    if (!selectedSucursal || !selectedGrupo || !selectedEvaluador) return;
    const lista = document.getElementById('aspirantes-list');
    lista.innerHTML = '<p style="text-align:center;color:var(--gray-500);">Cargando...</p>';
    document.getElementById('aspirantes-card').style.display = 'block';
    try {
        const r = await fetch(GOOGLE_SCRIPT_URL + '?action=getAspirantesPanel&sucursal=' + encodeURIComponent(selectedSucursal) + '&fecha=' + encodeURIComponent(selectedGrupo) + '&evaluador=' + encodeURIComponent(selectedEvaluador));
        const data = await r.json();
        aspirantesList = data.aspirantes || [];
        if (aspirantesList.length === 0) {
            lista.innerHTML = '<p style="text-align:center;color:var(--gray-500);">No hay aspirantes</p>';
            return;
        }
        lista.innerHTML = '';
        aspirantesList.forEach(asp => {
            const iniciales = asp.nombre.split(' ').map(n => n[0]).join('').substring(0,2).toUpperCase();
            let statusClass = 'status-pending', statusText = 'Pendiente', cardClass = '';
            if (asp.evaluadoPorMi) { statusClass = 'status-evaluated'; statusText = 'Evaluado'; cardClass = 'evaluated'; }
            if (asp.noSePresento) { statusClass = 'status-noshow'; statusText = 'üö´ No se present√≥'; cardClass = 'no-show'; }
            const div = document.createElement('div');
            div.className = 'aspirante-card ' + cardClass;
            div.innerHTML = '<div class="aspirante-info"><div class="aspirante-avatar">' + iniciales + '</div><div class="aspirante-details"><h4>' + asp.nombre + '</h4><p>' + asp.hora + ' ‚Ä¢ ' + asp.estado + '</p></div></div><span class="status-badge ' + statusClass + '">' + statusText + '</span>';
            // Solo permitir click si NO es no-show
            if (!asp.noSePresento) {
                div.onclick = () => iniciarEvaluacion(asp);
            }
            lista.appendChild(div);
        });
    } catch (e) {
        console.error(e);
        lista.innerHTML = '<p style="text-align:center;color:var(--danger);">Error al cargar</p>';
    }
}

function iniciarEvaluacion(asp) {
    selectedAspirante = asp;
    evaluaciones = {};
    vetos = [];
    const iniciales = asp.nombre.split(' ').map(n => n[0]).join('').substring(0,2).toUpperCase();
    document.getElementById('eval-avatar').textContent = iniciales;
    document.getElementById('eval-nombre').textContent = asp.nombre;
    document.getElementById('eval-info').textContent = selectedSucursal + ' ‚Ä¢ ' + asp.hora;
    document.querySelectorAll('.rating-btn').forEach(b => b.classList.remove('selected'));
    document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected','selected-warning','selected-danger'));
    document.getElementById('q1-notas').value = '';
    document.getElementById('observaciones').value = '';
    
    // Mostrar gu√≠a de rangos solo para ciertos evaluadores
    const guideBox = document.getElementById('guide-box');
    if (EVALUADORES_CON_GUIA.includes(selectedEvaluador)) {
        guideBox.style.display = 'block';
    } else {
        guideBox.style.display = 'none';
    }
    
    // Resetear bot√≥n de enviar
    const btnEnviar = document.getElementById('btn-enviar');
    btnEnviar.disabled = true;
    btnEnviar.innerHTML = 'Enviar Evaluaci√≥n ‚Üí';
    
    actualizarProgreso();
    showSection('section-evaluacion');
}

function setRating(q, v) {
    evaluaciones[q] = v;
    document.querySelectorAll('[data-question="'+q+'"] .rating-btn').forEach(b => b.classList.remove('selected'));
    event.target.classList.add('selected');
    actualizarProgreso();
}

function setOption(q, opt, pts, isVeto = false) {
    evaluaciones[q] = pts;
    if (isVeto) { if (!vetos.includes(q)) vetos.push(q); } else { vetos = vetos.filter(v => v !== q); }
    document.querySelectorAll('[data-question="'+q+'"] .option-btn').forEach(b => b.classList.remove('selected','selected-warning','selected-danger'));
    if (isVeto) event.target.classList.add('selected-danger');
    else if (pts === 3) event.target.classList.add('selected-warning');
    else event.target.classList.add('selected');
    actualizarProgreso();
}

function actualizarProgreso() {
    const preguntas = ['q2','q3','q4','q5','q6','r1','r2','r3','r4','r5','d1','d2','d3','p1','p2','p3'];
    const respondidas = preguntas.filter(q => evaluaciones[q] !== undefined).length;
    const porcentaje = (respondidas / preguntas.length) * 100;
    document.getElementById('eval-progress-bar').style.width = porcentaje + '%';
    document.getElementById('eval-progress-text').textContent = respondidas + '/' + preguntas.length;
    let puntaje = 0;
    preguntas.forEach(q => { if (evaluaciones[q] !== undefined) puntaje += evaluaciones[q]; });
    document.getElementById('resultado-score').textContent = puntaje + '/80';
    let resultado = '', colorStyle = '';
    if (respondidas < preguntas.length) { resultado = 'Completa la evaluaci√≥n'; colorStyle = 'background: var(--gray-500)'; }
    else if (vetos.length > 0) { resultado = '‚ùå No aprob√≥ (VETO)'; colorStyle = 'background: var(--danger)'; }
    else if (puntaje >= 64) { resultado = '‚úÖ Aprobado (muy bien)'; colorStyle = 'background: var(--success)'; }
    else if (puntaje >= 48) { resultado = '‚ö†Ô∏è Aprobado (regular)'; colorStyle = 'background: var(--warning)'; }
    else { resultado = '‚ùå No aprob√≥'; colorStyle = 'background: var(--danger)'; }
    document.getElementById('resultado-label').textContent = resultado;
    document.getElementById('resultado-label').style = colorStyle;
    document.getElementById('btn-enviar').disabled = respondidas < preguntas.length;
}

function marcarNoSePresento() {
    document.getElementById('noshow-nombre').textContent = selectedAspirante.nombre;
    // Resetear bot√≥n
    const btn = document.getElementById('btn-noshow');
    btn.disabled = false;
    btn.innerHTML = 'Confirmar No Show';
    showSection('section-noshow');
}

function volverAEvaluacion() { showSection('section-evaluacion'); }
function volverALista() { showSection('section-config'); cargarAspirantes(); }

async function confirmarNoShow() {
    const btn = document.getElementById('btn-noshow');
    btn.disabled = true;
    btn.innerHTML = '<span class="loading"></span> Guardando...';
    const data = {
        tipo: 'evaluacion_panel_noshow',
        sucursal: selectedSucursal,
        fecha: selectedGrupo,
        evaluador: selectedEvaluador,
        aspirante_nombre: selectedAspirante.nombre,
        aspirante_telefono: selectedAspirante.telefono,
        resultado: 'No se present√≥',
        timestamp: new Date().toLocaleString('es-MX')
    };
    try {
        await fetch(GOOGLE_SCRIPT_URL, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) });
        document.getElementById('confirmacion-mensaje').textContent = 'Se registr√≥ que ' + selectedAspirante.nombre + ' no se present√≥. Ya no aparecer√° para los dem√°s evaluadores.';
        showSection('section-confirmacion');
    } catch (e) {
        alert('Error. Intenta de nuevo.');
        btn.disabled = false;
        btn.innerHTML = 'Confirmar No Show';
    }
}

async function enviarEvaluacion() {
    const btn = document.getElementById('btn-enviar');
    btn.disabled = true;
    btn.innerHTML = '<span class="loading"></span> Enviando...';
    const preguntas = ['q2','q3','q4','q5','q6','r1','r2','r3','r4','r5','d1','d2','d3','p1','p2','p3'];
    let puntaje = 0;
    preguntas.forEach(q => { if (evaluaciones[q] !== undefined) puntaje += evaluaciones[q]; });
    let resultado = '';
    if (vetos.length > 0) resultado = 'No aprob√≥ (VETO)';
    else if (puntaje >= 64) resultado = 'Aprobado (muy bien)';
    else if (puntaje >= 48) resultado = 'Aprobado (regular)';
    else resultado = 'No aprob√≥';
    const data = {
        tipo: 'evaluacion_panel',
        sucursal: selectedSucursal,
        fecha: selectedGrupo,
        evaluador: selectedEvaluador,
        aspirante_nombre: selectedAspirante.nombre,
        aspirante_telefono: selectedAspirante.telefono,
        q1_notas: document.getElementById('q1-notas').value,
        q2: evaluaciones.q2 || 0, q3: evaluaciones.q3 || 0, q4: evaluaciones.q4 || 0, q5: evaluaciones.q5 || 0, q6: evaluaciones.q6 || 0,
        r1: evaluaciones.r1 || 0, r2: evaluaciones.r2 || 0, r3: evaluaciones.r3 || 0, r4: evaluaciones.r4 || 0, r5: evaluaciones.r5 || 0,
        d1: evaluaciones.d1 || 0, d2: evaluaciones.d2 || 0, d3: evaluaciones.d3 || 0,
        p1: evaluaciones.p1 || 0, p2: evaluaciones.p2 || 0, p3: evaluaciones.p3 || 0,
        puntaje_total: puntaje,
        tiene_veto: vetos.length > 0,
        vetos: vetos.join(','),
        resultado: resultado,
        observaciones: document.getElementById('observaciones').value,
        timestamp: new Date().toLocaleString('es-MX')
    };
    try {
        await fetch(GOOGLE_SCRIPT_URL, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) });
        document.getElementById('confirmacion-mensaje').textContent = 'Tu evaluaci√≥n para ' + selectedAspirante.nombre + ' ha sido registrada correctamente.';
        showSection('section-confirmacion');
    } catch (e) {
        alert('Error. Intenta de nuevo.');
        btn.disabled = false;
        btn.innerHTML = 'Enviar Evaluaci√≥n ‚Üí';
    }
}

function evaluarOtro() { showSection('section-config'); cargarAspirantes(); }
    </script>
</body>
</html>
